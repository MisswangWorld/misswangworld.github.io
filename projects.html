<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="All Projects - Janis Wang">
  <title>All Projects | Janis Wang</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #fbac2f;
      --primary-dark: #e99a1e;
      --primary-light: #ffc04d;
      --accent: #2E9AD0;
      --black: #1a1a1a;
      --gray-dark: #666;
      --gray: #999;
      --gray-light: #f5f5f2;
      --white: #FAF9F6;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--white);
      color: var(--black);
      line-height: 1.6;
    }

    /* Navigation */
    .nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 24px 48px;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(250, 249, 246, 0.95);
      backdrop-filter: blur(10px);
      z-index: 1000;
    }

    .nav-logo {
      font-family: 'Syne', sans-serif;
      font-size: 18px;
      font-weight: 600;
      color: var(--black);
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      gap: 32px;
      align-items: center;
    }

    .nav-link {
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      color: var(--gray-dark);
      text-decoration: none;
      transition: color 0.3s;
    }

    .nav-link:hover {
      color: var(--primary);
    }

    .nav-link.active {
      color: var(--primary);
    }

    .nav-link.btn {
      background: var(--black);
      color: white;
      padding: 10px 24px;
      border-radius: 6px;
    }

    .nav-link.btn:hover {
      background: var(--primary);
      color: var(--black);
    }

    /* Mobile menu toggle */
    .nav-toggle {
      display: none;
      flex-direction: column;
      gap: 5px;
      cursor: pointer;
      padding: 5px;
    }

    .nav-toggle span {
      width: 24px;
      height: 2px;
      background: var(--black);
      transition: 0.3s;
    }

    /* Page Header */
    .page-header {
      padding: 140px 48px 60px;
      background: var(--primary);
      text-align: center;
    }

    .page-header h1 {
      font-family: 'Syne', sans-serif;
      font-size: 48px;
      font-weight: 700;
      color: var(--black);
      margin-bottom: 12px;
    }

    .page-header p {
      color: rgba(0,0,0,0.6);
      font-size: 16px;
    }

    /* Projects Section */
    .projects {
      padding: 60px 48px 80px;
      background: var(--gray-light);
      min-height: calc(100vh - 300px);
    }

    .projects-inner {
      max-width: 1200px;
      margin: 0 auto;
    }

    .projects-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 28px;
    }

    .project-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-decoration: none;
      color: inherit;
      display: block;
    }

    .project-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 16px 40px rgba(0,0,0,0.1);
    }

    .project-image {
      height: 180px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .project-logo {
      width: 80px;
      height: 80px;
      object-fit: contain;
      border-radius: 12px;
    }

    .project-number {
      font-family: 'Syne', sans-serif;
      font-size: 56px;
      color: rgba(0,0,0,0.15);
      font-weight: 700;
    }

    .project-badge {
      position: absolute;
      bottom: 14px;
      left: 14px;
      background: var(--accent);
      color: white;
      padding: 5px 12px;
      border-radius: 4px;
      font-size: 10px;
      letter-spacing: 0.5px;
      font-weight: 500;
    }

    .project-info {
      padding: 24px;
    }

    .project-title {
      font-family: 'Syne', sans-serif;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 6px;
      color: var(--black);
    }

    .project-desc {
      font-size: 13px;
      color: var(--gray);
    }

    /* Loading State */
    .loading {
      text-align: center;
      padding: 60px 20px;
      color: var(--gray);
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid var(--gray-light);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto 16px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 80px 20px;
      color: var(--gray);
    }

    .empty-state h2 {
      font-family: 'Syne', sans-serif;
      font-size: 24px;
      color: var(--black);
      margin-bottom: 12px;
    }

    /* Footer */
    .footer {
      padding: 24px 48px;
      background: #111;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #444;
      font-size: 12px;
    }

    .footer a {
      color: #444;
      text-decoration: none;
      transition: color 0.3s;
    }

    .footer a:hover {
      color: var(--primary);
    }

    /* Responsive */
    @media (max-width: 900px) {
      .projects-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
      }

      .page-header {
        padding: 120px 32px 50px;
      }

      .page-header h1 {
        font-size: 36px;
      }

      .projects {
        padding: 50px 32px 60px;
      }
    }

    @media (max-width: 600px) {
      .nav {
        padding: 20px 24px;
      }

      .nav-links {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--white);
        flex-direction: column;
        padding: 24px;
        gap: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      }

      .nav-links.active {
        display: flex;
      }

      .nav-toggle {
        display: flex;
      }

      .page-header {
        padding: 100px 24px 40px;
      }

      .page-header h1 {
        font-size: 28px;
      }

      .projects {
        padding: 40px 24px 50px;
      }

      .projects-grid {
        grid-template-columns: 1fr;
      }

      .footer {
        flex-direction: column;
        gap: 12px;
        text-align: center;
        padding: 24px;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <a href="index.html" class="nav-logo">Janis Wang</a>
    <div class="nav-toggle" onclick="toggleMenu()">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <div class="nav-links">
      <a href="index.html#about" class="nav-link">About</a>
      <a href="projects.html" class="nav-link active">Projects</a>
      <a href="index.html#contact" class="nav-link btn">Contact</a>
    </div>
  </nav>

  <!-- Page Header -->
  <header class="page-header">
    <h1>All Projects</h1>
    <p>Explore my work and experiments</p>
  </header>

  <!-- Projects Section -->
  <section class="projects">
    <div class="projects-inner">
      <div class="projects-grid" id="projectsGrid">
        <div class="loading">
          <div class="loading-spinner"></div>
          <p>Loading projects...</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <span>Â© 2026 Janis Wang</span>
    <span>Made with taste</span>
  </footer>

  <script>
    // Toggle mobile menu
    function toggleMenu() {
      document.querySelector('.nav-links').classList.toggle('active');
    }

    // Close menu when clicking a link
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', () => {
        document.querySelector('.nav-links').classList.remove('active');
      });
    });

    // Color palette for project cards
    const colorPalette = [
      '#fbac2f', // primary
      '#e99a1e', // primary-dark
      '#ffc04d', // primary-light
      '#2E9AD0', // accent
      '#7B68EE', // purple
      '#20B2AA', // teal
    ];

    // Load a single project's manifest
    async function loadProjectManifest(projectId) {
      const response = await fetch(`projects/${projectId}/manifest.json`);
      if (!response.ok) return null;
      const data = await response.json();
      return { id: projectId, ...data };
    }

    // Load all projects from their individual manifests
    async function loadProjects() {
      const grid = document.getElementById('projectsGrid');

      try {
        // Load global manifest to get project list
        const response = await fetch('projects/manifest.json');
        if (!response.ok) {
          throw new Error('Failed to load projects list');
        }
        const data = await response.json();
        const projectIds = data.all || [];

        if (projectIds.length === 0) {
          grid.innerHTML = `
            <div class="empty-state" style="grid-column: 1 / -1;">
              <h2>No Projects Yet</h2>
              <p>Check back soon for new projects!</p>
            </div>
          `;
          return;
        }

        // Load each project's manifest
        const projects = await Promise.all(
          projectIds.map(id => loadProjectManifest(id))
        );
        const validProjects = projects.filter(p => p !== null);

        // Render project cards
        grid.innerHTML = validProjects.map((project, index) => {
          const color = project.color || colorPalette[index % colorPalette.length];
          const number = String(index + 1).padStart(2, '0');
          const logoPath = project.logo ? `projects/${project.id}/${project.logo}` : null;

          return `
            <a href="project.html?name=${project.id}" class="project-card">
              <div class="project-image" style="background: ${color};">
                ${logoPath
                  ? `<img src="${logoPath}" alt="${project.title}" class="project-logo" onerror="this.style.display='none';this.nextElementSibling.style.display='block';">
                     <span class="project-number" style="display:none;">${number}</span>`
                  : `<span class="project-number">${number}</span>`
                }
                ${project.badge ? `<span class="project-badge">${project.badge}</span>` : ''}
              </div>
              <div class="project-info">
                <h3 class="project-title">${project.title}</h3>
                <p class="project-desc">${project.description}</p>
              </div>
            </a>
          `;
        }).join('');

      } catch (error) {
        grid.innerHTML = `
          <div class="empty-state" style="grid-column: 1 / -1;">
            <h2>Unable to Load Projects</h2>
            <p>Please try again later.</p>
          </div>
        `;
      }
    }

    // Initialize
    loadProjects();
  </script>
</body>
</html>
